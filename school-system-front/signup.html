<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="signup.css">
  <br></br>
<title>Page Title</title>
</head>
<body >
    <h1 style="font-size:45px;width:30%;margin:auto;color:rgb(9, 73, 82)">Create new acoount</h1><br></br>
   
  </div>
  <div  style="width:30%;margin:auto ">
    <form onsubmit="onCreateAccount(event)"action="/action_page.php">
      <div class="container">
        <label for="uname"><b>Username</b></label>
        <input type="text" placeholder="Please enter username" id="username" required>
    
        <label for="psw"><b>Password</b></label>
        <input type="password" placeholder="Please enter password" id="password" required>
    <hr>
        <button type="submit" class="btn btn-success" >Create account</button>
        <button type="button" class="btn btn-primary" onclick="onOpenLoginPage()">Login Page</button>
        <label>
            <br>
          <input type="checkbox" checked="checked" name="remember"> Remember me
        </label>
      </div>
    
      <div class="container" style="background-color:#f1f1f1">
        
        
      </div>
    </form>
  </div>
        

       
  <script>
       var usernameInput=document.getElementById('username');
      var passwordInput=document.getElementById('password');

      function onCreateAccount(event){
        event.preventDefault();
        var username=usernameInput.value
        var password=passwordInput.value
        var http= new XMLHttpRequest();
        http.onload=function(){
            var response=this.responseText;
            var user=JSON.parse(response)
            if(user.username==""){
            alert("This username has already existed")
            }
            else{
                alert("Account created succesfully")
            }
 
        }
        var userObject={};
        userObject.username=username;
        userObject.password=password;
       
        http.open("POST","http://localhost:8105/users",true);
   http.setRequestHeader("Content-Type","application/json")
   
        http.send(JSON.stringify(userObject));


      }
      function onOpenLoginPage(){
        window.location.href='login.html'
      }
     
  </script>
</body>
</html>